### This file is managed by Puppet.  Any changes will be overwritten
##
##

[mysqld]
log-error=/var/log/mariadb/mariadb.log
datadir=/var/lib/mysql
socket=/var/lib/mysql/mysql.sock
user=mysql
# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0

server-id = <%= @db_server_id %>
log-bin = mysql-bin
binlog_format=row
<% if @db_replication == false %>binlog-do-db=<%= @db_name %><% elsif @db_server_id == 1 %>binlog-do-db=<%= @db_name %><% else %>replicate-do-db=<%= @db_name %><% end %>
auto_increment_increment = <%= @db_server_id %>
auto_increment_offset = 1

#interactive_timeout=60
#wait_timeout=60
#relay-log = mysqld-relay-bin

innodb_buffer_pool_size=2147483648
query_cache_size=524288000
innodb_flush_log_at_trx_commit=2
thread_cache_size=4
log_slow_queries=ON

max_allowed_packet=10485760
slow_query_log_file = '/var/log/mariadb/mariadb-slow.log'
log_slow_queries = '/var/log/mariadb/mariadb-slow.log'
log=/var/log/mariadb/mariadb.log

[mysqld_safe]
log-error=/var/log/mariadb/mariadb.log
pid-file=/var/run/mariadb/mariadb.pid
